# Webhook Notifier Configuration - Redis Keyspace Listener â†’ HTTP Notifications
# This service listens to Redis keyspace events and sends HTTP webhook notifications

# Redis Configuration
redis:
  addr: "localhost:6379" # Redis server address
  password: ""               # Redis password (leave empty if no password)
  db: 0                      # Redis database number

server:
  health_port: 8185   # Health check port (different from other services)
  region: "us-west-1" # Server region identifier

# Webhook notification configuration
webhook:
  url: "https://your-webhook-endpoint.com/notifications"  # Webhook endpoint URL
  timeout: 30                    # HTTP request timeout in seconds
  max_retries: 5                # Maximum retry attempts
  base_retry_interval: 15       # Base retry interval in seconds (exponential backoff)
  max_retry_interval: 300       # Maximum retry interval in seconds
  auth_token: ""                # Optional Bearer token for authentication
  
  # Which task states trigger notifications
  notify_states:
    - "PROCESSING"              # Task started processing(Every LeaseRenewalInterval)
    - "STOPPED"                 # Task stopped/completed (Once)
    - "FAILED"                  # Task failed(Once)
    - "TIMEOUT"                 # Task timed out(Once)

  # Dedupe retention for terminal states (seconds). Within this window,
  # STOPPED/FAILED/TIMEOUT will only be delivered once even across restarts.
  delivered_ttl: 172800          # 48 hours

# Environment variable overrides:
# REDIS_ADDR, REDIS_PASSWORD, SERVER_REGION, WEBHOOK_URL, WEBHOOK_AUTH_TOKEN
